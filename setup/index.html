<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Brian Innes"><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-8.5.10"><title>Setup - Watson Libraries</title><link rel=stylesheet href=../assets/stylesheets/main.975780f9.min.css><link rel=stylesheet href=../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=None data-md-color-accent=None> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#setup class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Watson Libraries" class="md-header__button md-logo" aria-label="Watson Libraries" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Watson Libraries </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Setup </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/binnes/watson-libraries title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> watson-libraries </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Watson Libraries" class="md-nav__button md-logo" aria-label="Watson Libraries" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Watson Libraries </label> <div class=md-nav__source> <a href=https://github.com/binnes/watson-libraries title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> watson-libraries </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Setup <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Setup </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tools-needed class=md-nav__link> Tools needed </a> </li> <li class=md-nav__item> <a href=#local-bare-metal-cluster class=md-nav__link> Local bare metal cluster </a> </li> <li class=md-nav__item> <a href=#accessing-container-images-on-ibm-container-registry class=md-nav__link> Accessing container images on IBM Container Registry </a> <nav class=md-nav aria-label="Accessing container images on IBM Container Registry"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#local-docker-podman-skopeo class=md-nav__link> Local Docker / Podman / Skopeo </a> </li> <li class=md-nav__item> <a href=#kubernetes-openshift class=md-nav__link> Kubernetes / OpenShift </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#setting-up-a-local-mirror class=md-nav__link> Setting up a local mirror </a> <nav class=md-nav aria-label="Setting up a local mirror"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-the-local-mirror class=md-nav__link> Using the local mirror </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Natural Language Processing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Natural Language Processing" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Natural Language Processing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../nlp/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../nlp-combined-image/ class=md-nav__link> Stand alone container </a> </li> <li class=md-nav__item> <a href=../nlp-external-volume/ class=md-nav__link> External volume </a> </li> <li class=md-nav__item> <a href=../nlp-modelmesh/ class=md-nav__link> KServe modelmesh </a> </li> <li class=md-nav__item> <a href=../nlp-custom-models/ class=md-nav__link> custom model </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Speech <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Speech data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Speech </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../speech/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Speech to Text <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Speech to Text" data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Speech to Text </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../stt-local/ class=md-nav__link> Local use </a> </li> <li class=md-nav__item> <a href=../stt-kube/ class=md-nav__link> Kubernetes deployment </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Text to Speech <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Text to Speech" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Text to Speech </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tts-local/ class=md-nav__link> Local use </a> </li> <li class=md-nav__item> <a href=../tts-kube/ class=md-nav__link> Kubernetes deployment </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tools-needed class=md-nav__link> Tools needed </a> </li> <li class=md-nav__item> <a href=#local-bare-metal-cluster class=md-nav__link> Local bare metal cluster </a> </li> <li class=md-nav__item> <a href=#accessing-container-images-on-ibm-container-registry class=md-nav__link> Accessing container images on IBM Container Registry </a> <nav class=md-nav aria-label="Accessing container images on IBM Container Registry"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#local-docker-podman-skopeo class=md-nav__link> Local Docker / Podman / Skopeo </a> </li> <li class=md-nav__item> <a href=#kubernetes-openshift class=md-nav__link> Kubernetes / OpenShift </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#setting-up-a-local-mirror class=md-nav__link> Setting up a local mirror </a> <nav class=md-nav aria-label="Setting up a local mirror"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-the-local-mirror class=md-nav__link> Using the local mirror </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/binnes/watson-libraries/edit/main/docs/setup.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=setup>Setup<a class=headerlink href=#setup title="Permanent link">&para;</a></h1> <h2 id=tools-needed>Tools needed<a class=headerlink href=#tools-needed title="Permanent link">&para;</a></h2> <p>The examples in this repositories require the following:</p> <ul> <li>a container tool, such as Docker or Podman</li> <li>optionally a container management tool, such as Skopeo</li> <li>access to a Kubernetes or OpenShift cluster.</li> </ul> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The examples in this repo have been written using a local, bare metal OpenShift cluster, but the examples could be adapted to a Kubernetes cluster or a cluster hosted on a cloud provider</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Make sure your Docker or Podman environment has sufficient resources. A single CPU with 2MB of memory will not be sufficient, suggest using at least 4 CPUs with 8096 MB of memory</p> </div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Using an Apple Silicon apple mac needs the container runtime to be able to run amd64 images, as the Watson Libraries are only published using amd64 architecture. Ensure that no podman machine exists then setup podman like:</p> <div class=highlight><pre><span></span><code>podman machine init --cpus <span class=m>6</span> -m <span class=m>8096</span> --rootful --now
podman machine ssh
</code></pre></div> <div class=highlight><pre><span></span><code><span class=c1># run the following inside the podman shell</span>
sudo -i
rpm-ostree install qemu-user-static
systemctl reboot
</code></pre></div> </div> <h2 id=local-bare-metal-cluster>Local bare metal cluster<a class=headerlink href=#local-bare-metal-cluster title="Permanent link">&para;</a></h2> <ol> <li>install OCP</li> <li> <p>install Operators from Operator Hub catalog:</p> <ul> <li>OpenShift Data Foundation</li> <li> <p>Red Hat Quay</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>There is a bug in Quay 3.7.10 that prevents large container layers from being stored, which means the Watson Libraries images cannot be stored. <a href=https://access.redhat.com/solutions/6987551 target=_blank>This article</a> explains how to deploy a workaround</p> </div> </li> </ul> </li> </ol> <h2 id=accessing-container-images-on-ibm-container-registry>Accessing container images on IBM Container Registry<a class=headerlink href=#accessing-container-images-on-ibm-container-registry title="Permanent link">&para;</a></h2> <p>The IBM Watson Libraries for Embed container images are provided on the IBM Container Registry service, but requires an <a href=https://myibm.ibm.com/products-services/containerlibrary target=_blank>entitlement key</a> to access them. Once you have a key you need to use it when accessing them.</p> <h3 id=local-docker-podman-skopeo>Local Docker / Podman / Skopeo<a class=headerlink href=#local-docker-podman-skopeo title="Permanent link">&para;</a></h3> <p>When accessing the images on your local machine using Docker or Podman you need to login to the IBM container registry:</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Docker</label><label for=__tabbed_1_2>Podman</label><label for=__tabbed_1_3>Skopeo</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code>docker login cp.icr.io --username cp --password &lt;entitlement_key&gt;
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code>podman login cp.icr.io --username cp --password &lt;entitlement_key&gt;
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code>skopeo login cp.icr.io --username cp --password &lt;entitlement_key&gt;
</code></pre></div> </div> </div> </div> <h3 id=kubernetes-openshift>Kubernetes / OpenShift<a class=headerlink href=#kubernetes-openshift title="Permanent link">&para;</a></h3> <p>When accessing the images from a Kubernetes of OpenShift cluster, you need to setup a secret on the cluster then refer to it in a deployment manifest.</p> <div class=highlight><pre><span></span><code>kubectl create secret docker-registry ibm-entitlement-key --docker-server<span class=o>=</span>cp.icr.io --docker-username<span class=o>=</span>cp --docker-password<span class=o>=</span>&lt;entitlement key&gt; --docker-email<span class=o>=</span>&lt;your-email&gt;
</code></pre></div> <p>within a deployment manifest add an <strong>imagePullSecret</strong> to the template section:</p> <div class=highlight><pre><span></span><code><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class=w></span>
<span class=w>    </span><span class="l l-Scalar l-Scalar-Plain">template</span><span class="p p-Indicator">:</span><span class=w></span>
<span class=w>        </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class=w></span>
<span class=w>        </span><span class="l l-Scalar l-Scalar-Plain">spec</span><span class="p p-Indicator">:</span><span class=w></span>
<span class=w>            </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class=w></span>
<span class=w>            </span><span class="l l-Scalar l-Scalar-Plain">imagePullSecrets</span><span class="p p-Indicator">:</span><span class=w></span>
<span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-entitlement-key</span><span class=w></span>
</code></pre></div> <h2 id=setting-up-a-local-mirror>Setting up a local mirror<a class=headerlink href=#setting-up-a-local-mirror title="Permanent link">&para;</a></h2> <p>Some of the image sizes of the IBM Watson Libraries for Embed containers are extremely large, running into multiple megabytes, so it can be advantageous to work against a local mirror.</p> <p>The example configuration installs Quay on the demo cluster. This can be used to hold local mirrors of the IBM Watson for Embed container images. </p> <p>To mirror the images the Quay mirror repository can be used to automatically mirror the images, or <a href=https://github.com/containers/skopeo target=_blank>Skopeo</a> can be used to copy the images from the IBM Container Registry to the local Quay registry.</p> <h3 id=using-the-local-mirror>Using the local mirror<a class=headerlink href=#using-the-local-mirror title="Permanent link">&para;</a></h3> <p>The local Quay registry has a self-signed SSL certificate by default, so docker, podman, Skopeo and Kubernetes/OpenShift need to be configured to accept or ignore the self-signed X509 certificate when accessing the local registry.</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:4><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><input id=__tabbed_2_3 name=__tabbed_2 type=radio><input id=__tabbed_2_4 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>Docker</label><label for=__tabbed_2_2>Podman</label><label for=__tabbed_2_3>Skopeo</label><label for=__tabbed_2_4>OpenShift / Kubernetes</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>Docker Desktop and Engine have a configuration file which allow insecure registries to be configured. You need to add the <strong>insecure-registries</strong> to the configuration file. In Docker for Desktop this can be found in the Preferences panel under the Docker Engine section. On Linux this configuration file is usually found at location <code>/etc/docker/daemon.json</code>. Add the section, so the file looks similar to this:</p> <div class=highlight><pre><span></span><code><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;builder&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nt>&quot;gc&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nt>&quot;defaultKeepStorage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;20GB&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>},</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;experimental&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;features&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nt>&quot;buildkit&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=w>    </span><span class=p>},</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;insecure-registries&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>        </span><span class=s2>&quot;https://lab-registry-quay-openshift-operators.apps.ocp.lab.home&quot;</span><span class=w></span>
<span class=w>    </span><span class=p>]</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>additional details of the configuration can be found in the <a href=https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file target=_blank>docker documentation</a></p> </div> <div class=tabbed-block> <p>Podman accepts the <code>--tls-verify=false</code> command line argument, so if added to any command it will ignore any TLS errors.</p> </div> <div class=tabbed-block> <p>Skopeo accepts the <code>--src-tls-verify=false</code> and <code>dest-tls-verify=false</code> command line arguments, so if added to the copy command it will ignore TLS errors from the source and/or the destination registries.</p> </div> <div class=tabbed-block> <p>Enable OpenShift to pull images from local Quay container registry (using self-signed X509 certificate) by adding the self-signed certificate to the cluster configuration. This can be achieved by running the following as a cluster admin:</p> <div class=highlight><pre><span></span><code>- *Modify the REGISTRY_HOSTNAME value on the first line to match your installation*

```shell
export REGISTRY_HOSTNAME=lab-registry-quay-openshift-operators.apps.ocp.lab.home
export REGISTRY_PORT=443
echo &quot;&quot; | openssl s_client -showcerts -prexit -connect &quot;${REGISTRY_HOSTNAME}:${REGISTRY_PORT}&quot; 2&gt; /dev/null | sed -n -e &#39;/BEGIN CERTIFICATE/,/END CERTIFICATE/ p&#39; &gt; tmp.crt
openssl x509 -in tmp.crt -text | grep Issuer
oc create configmap registry-quay -n openshift-config --from-file=&quot;${REGISTRY_HOSTNAME}=$(pwd)/tmp.crt&quot;
oc patch image.config.openshift.io/cluster --patch &#39;{&quot;spec&quot;:{&quot;additionalTrustedCA&quot;:{&quot;name&quot;:&quot;registry-quay&quot;}}}&#39; --type=merge
oc get image.config.openshift.io/cluster -o yaml
```
</code></pre></div> </div> </div> </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=.. class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Home </div> </div> </a> <a href=../nlp/ class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Overview </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["content.code.annotate", "content.tabs.link", "navigation.instant", "naviagation.sections", "navigation.tracking", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../assets/javascripts/bundle.5a2dcb6a.min.js></script> </body> </html>